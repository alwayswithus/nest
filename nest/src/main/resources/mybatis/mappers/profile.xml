<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="profile">
	<select id="selectUser" parameterType="long" resultType="uservo">
	<![CDATA[
		select user_no as userNo,
			   user_email as userEmail,
			   user_name as userName,
			   user_password as userPassword,
			   user_number as userNumber,
			   user_birth as userBirth,
			   user_title as userTitle,
			   user_dept as userDept,
			   user_photo as userPhoto,
			   user_grade as userGrade
	 	from user 
	 	where user_no = #{userNo}
 		]]> 
	</select>
	
	<select id="selectAboutProject" parameterType="long" resultType="hashmap">
	<![CDATA[
		select up.project_no, up.role_no, p.project_title, u.user_name
		  from userproject up
		  join user u on u.user_no = up.user_no
		  join project p on p.project_no = up.project_no
		 where up.user_no = #{userNo}
 		]]> 
	</select>
	
	<update id="updateUser" parameterType="uservo">
		update user set 
			   user_name = #{userName},
			   user_dept = #{userDept},
			   user_title = #{userTitle},
			   user_number = #{userNumber},
			   user_birth = #{userBirth},
			   user_photo = #{userPhoto}
	    where user_no = #{userNo}
	</update>
	
	<update id="updatePass" parameterType="uservo">
		update user set 
			   user_password = #{userNewPassword}
	     where user_no = #{userNo}
	       and user_password = #{userPassword}
	</update>
</mapper>
